<!DOCTYPE html>
<html class="scroll-smooth" lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>UCN Campus Navigator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Scrollbar for autocomplete */
        #autocomplete::-webkit-scrollbar {
            width: 6px;
        }
        #autocomplete::-webkit-scrollbar-thumb {
            background-color: #a5b4fc;
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-gradient-to-tr from-indigo-500 to-purple-700 min-h-screen flex justify-center items-start p-5 transition-colors duration-500" id="body">
    <div class="phone-container w-[375px] h-[812px] bg-black rounded-[40px] p-2.5 shadow-[0_20px_40px_rgba(0,0,0,0.3)] relative flex flex-col transition-colors duration-500" id="phoneContainer">
        <div class="screen flex flex-col w-full h-full bg-white rounded-[32px] overflow-hidden relative transition-colors duration-500" id="screen">
            <!-- Status Bar -->
            <header class="status-bar h-11 bg-indigo-900 flex justify-between items-center px-5 text-white text-sm font-semibold select-none transition-colors duration-500" id="statusBar">
                <span>9:41</span>
                <span>UCN Campus</span>
                <span>100% <i class="fas fa-battery-full"></i></span>
            </header>
            <main class="app-container flex flex-col flex-1 relative">
                <!-- Home Screen -->
                <section class="screen-content active flex flex-col h-full overflow-y-auto" id="home">
                    <div class="header bg-gradient-to-br from-indigo-900 to-indigo-700 text-white p-5 text-center shadow-md flex-shrink-0 transition-colors duration-500" id="headerHome">
                        <h1 class="text-2xl font-semibold mb-1">üéì UCN Navigator</h1>
                        <p class="text-sm opacity-90">Tu gu√≠a inteligente por el campus</p>
                    </div>
                    <div class="search-section bg-white p-5 flex-shrink-0 transition-colors duration-500" id="searchSection">
                        <div class="relative">
                            <input aria-label="Buscar ubicaci√≥n" autocomplete="off" class="search-input w-full rounded-full border-2 border-gray-300 px-5 py-4 pr-14 text-base outline-none transition focus:border-indigo-700 focus:ring-2 focus:ring-indigo-300 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:focus:border-indigo-400" id="searchInput" placeholder="¬øA d√≥nde quieres ir?" type="text"/>
                            <span class="search-icon absolute right-5 top-1/2 -translate-y-1/2 text-gray-500 text-xl select-none dark:text-gray-300">
                                <i class="fas fa-search"></i>
                            </span>
                            <div aria-label="Sugerencias de b√∫squeda" class="autocomplete absolute top-full left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-xl border border-gray-300 bg-white shadow-lg z-20 hidden dark:bg-gray-800 dark:border-gray-600" id="autocomplete" role="listbox">
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Biblioteca Central" role="option" tabindex="0" aria-selected="false">Biblioteca Central</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Ciencias de Ingenier√≠a y Construcci√≥n" role="option" tabindex="0" aria-selected="false">Facultad de Ciencias de Ingenier√≠a y Construcci√≥n</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Ingenier√≠a y Ciencias Geol√≥gicas" role="option" tabindex="0" aria-selected="false">Facultad de Ingenier√≠a y Ciencias Geol√≥gicas</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Ciencias" role="option" tabindex="0" aria-selected="false">Facultad de Ciencias</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Humanidades" role="option" tabindex="0" aria-selected="false">Facultad de Humanidades</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Educaci√≥n" role="option" tabindex="0" aria-selected="false">Facultad de Educaci√≥n</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Ciencias Jur√≠dicas" role="option" tabindex="0" aria-selected="false">Facultad de Ciencias Jur√≠dicas</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Facultad de Econom√≠a y Administraci√≥n" role="option" tabindex="0" aria-selected="false">Facultad de Econom√≠a y Administraci√≥n</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Escuela de Arquitectura" role="option" tabindex="0" aria-selected="false">Escuela de Arquitectura</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Escuela de Ciencias Empresariales" role="option" tabindex="0" aria-selected="false">Escuela de Ciencias Empresariales</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Ba√±os" role="option" tabindex="0" aria-selected="false">Ba√±os</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Comedor Principal" role="option" tabindex="0" aria-selected="false">Comedor Principal</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Laboratorio de Computaci√≥n" role="option" tabindex="0" aria-selected="false">Laboratorio de Computaci√≥n</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Auditorium" role="option" tabindex="0" aria-selected="false">Auditorium</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Secretar√≠a" role="option" tabindex="0" aria-selected="false">Secretar√≠a</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Estacionamiento" role="option" tabindex="0" aria-selected="false">Estacionamiento</div>
                                <div class="autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800" data-location="Enfermer√≠a" role="option" tabindex="0" aria-selected="false">Enfermer√≠a</div>
                            </div>
                        </div>
                        <div class="user-filter flex gap-3 mt-4">
                            <button aria-pressed="true" class="filter-btn active flex-1 rounded-full border-2 border-gray-300 bg-white py-2 text-sm font-medium text-indigo-900 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" data-type="estudiante">üë®‚Äçüéì Estudiante</button>
                            <button aria-pressed="false" class="filter-btn flex-1 rounded-full border-2 border-gray-300 bg-white py-2 text-sm font-medium text-gray-700 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" data-type="docente">üë©‚Äçüè´ Docente</button>
                            <button aria-pressed="false" class="filter-btn flex-1 rounded-full border-2 border-gray-300 bg-white py-2 text-sm font-medium text-gray-700 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" data-type="visitante">üë§ Visitante</button>
                        </div>
                    </div>
                    <div class="quick-access bg-gray-50 p-5 flex-1 overflow-y-auto transition-colors duration-500" id="quickAccess">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 dark:text-gray-200">‚ö° Acceso R√°pido</h3>
                        <div class="quick-grid grid grid-cols-3 gap-4">
                            <div aria-label="Ir a Biblioteca Central" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Biblioteca Central" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üìö</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Biblioteca</span>
                            </div>
                            <div aria-label="Ir a Ba√±os" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Ba√±os" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üöª</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Ba√±os</span>
                            </div>
                            <div aria-label="Ir a Comedor Principal" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Comedor Principal" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üçΩÔ∏è</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Comedor</span>
                            </div>
                            <div aria-label="Ir a Secretar√≠a" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Secretar√≠a" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üìù</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Secretar√≠a</span>
                            </div>
                            <div aria-label="Ir a Estacionamiento" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Estacionamiento" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üöó</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Parking</span>
                            </div>
                            <div aria-label="Ir a Enfermer√≠a" class="quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white" data-location="Enfermer√≠a" role="button" tabindex="0">
                                <span class="quick-item-icon text-3xl block mb-2">üè•</span>
                                <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">Enfermer√≠a</span>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Map Screen -->
                <section class="screen-content flex flex-col h-full hidden overflow-hidden relative transition-colors duration-500" id="map">
                    <div class="offline-indicator bg-orange-500 text-white text-center text-sm font-semibold py-2 select-none hidden" id="offlineIndicator">üì° Modo Offline Activado</div>
                    <div class="header bg-gradient-to-br from-indigo-900 to-indigo-700 text-white p-5 text-center shadow-md flex-shrink-0 transition-colors duration-500" id="headerMap">
                        <h1 class="text-2xl font-semibold mb-1">üó∫Ô∏è Mapa UCN</h1>
                        <p class="text-sm opacity-90">Campus Casa Central - Antofagasta</p>
                    </div>
                    <div class="map-container flex-1 relative bg-green-100 dark:bg-green-900 transition-colors duration-500">
                        <img alt="Mapa interactivo del campus universitario UCN, mostrando edificios y caminos principales, con colores verdes y caminos destacados" class="w-full h-full object-cover select-none" draggable="false" height="400" src="https://storage.googleapis.com/a1aa/image/5dd184a1-ae45-4948-be86-2c1479b9b72f.jpg" width="600"/>
                        <div aria-atomic="true" aria-label="Informaci√≥n de ruta" aria-live="polite" class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-5 shadow-lg transform translate-y-3/4 transition-transform duration-300 ease-in-out dark:bg-gray-800 dark:text-white" id="routeInfo" style="will-change: transform;">
                            <div class="route-header flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    <span>üìç</span>
                                    <span id="routeLocation">Biblioteca Central</span>
                                </h3>
                                <button aria-label="Cerrar informaci√≥n de ruta" class="text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-400 rounded dark:text-gray-300 dark:hover:text-white" onclick="toggleRouteInfo()">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <div aria-label="Opciones de ruta" class="route-options flex gap-3 mb-5" role="radiogroup">
                                <button aria-checked="true" class="route-option active flex-1 rounded-full border border-gray-300 bg-white py-2 text-xs font-semibold text-indigo-900 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-indigo-300 dark:border-indigo-300" role="radio" type="button">üö∂ M√°s r√°pida (3 min)</button>
                                <button aria-checked="false" class="route-option flex-1 rounded-full border border-gray-300 bg-white py-2 text-xs font-semibold text-gray-700 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600" role="radio" type="button">‚ôø Accesible (5 min)</button>
                                <button aria-checked="false" class="route-option flex-1 rounded-full border border-gray-300 bg-white py-2 text-xs font-semibold text-gray-700 transition hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600" role="radio" type="button">üå≥ Tur√≠stica (7 min)</button>
                            </div>
                            <button class="start-btn w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-full transition focus:outline-none focus:ring-2 focus:ring-green-400" onclick="startNavigation()" type="button">üß≠ Iniciar Navegaci√≥n</button>
                            <!-- Bot√≥n de Agregar a Favoritos movido aqu√≠ -->
                            <button aria-label="Agregar ubicaci√≥n a Favoritos" class="mt-3 w-full bg-indigo-700 hover:bg-indigo-800 text-white font-semibold py-3 rounded-full transition focus:outline-none focus:ring-2 focus:ring-indigo-400 opacity-50 cursor-not-allowed" disabled="" id="addFavoriteBtn" type="button">‚≠ê Agregar a Favoritos</button>
                        </div>
                        <div class="map-controls absolute top-5 right-5 flex flex-col gap-3 z-10">
                            <button aria-label="Zoom In" class="map-btn w-12 h-12 bg-white rounded-full shadow-md flex items-center justify-center text-xl hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="zoomIn()">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button aria-label="Zoom Out" class="map-btn w-12 h-12 bg-white rounded-full shadow-md flex items-center justify-center text-xl hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="zoomOut()">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button aria-label="Cambiar tipo de mapa" class="map-btn w-12 h-12 bg-white rounded-full shadow-md flex items-center justify-center text-xl hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="toggleMapType()">
                                <i class="fas fa-satellite"></i>
                            </button>
                        </div>
                        <button aria-label="Centrar ubicaci√≥n" class="location-btn absolute bottom-28 right-5 w-14 h-14 bg-indigo-900 text-white rounded-full shadow-lg flex items-center justify-center text-2xl hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="centerLocation()">
                            <i class="fas fa-location-arrow"></i>
                        </button>
                    </div>
                </section>
                <!-- Favorites Screen -->
                <section class="screen-content flex flex-col h-full hidden overflow-y-auto transition-colors duration-500" id="favorites">
                    <div class="header bg-gradient-to-br from-indigo-900 to-indigo-700 text-white p-5 text-center shadow-md flex-shrink-0 transition-colors duration-500" id="headerFavorites">
                        <h1 class="text-2xl font-semibold mb-1">‚≠ê Favoritos</h1>
                        <p class="text-sm opacity-90">Tus lugares guardados</p>
                    </div>
                    <div class="settings-content flex-1 p-5 bg-white overflow-y-auto dark:bg-gray-800 dark:text-white" id="favoritesList">
                        <p class="text-gray-500 dark:text-gray-400 text-center mt-10">No tienes ubicaciones favoritas a√∫n.</p>
                    </div>
                </section>
                <!-- Settings Screen -->
                <section class="screen-content flex flex-col h-full hidden overflow-y-auto transition-colors duration-500" id="settings">
                    <div class="header bg-gradient-to-br from-indigo-900 to-indigo-700 text-white p-5 text-center shadow-md flex-shrink-0 transition-colors duration-500" id="headerSettings">
                        <h1 class="text-2xl font-semibold mb-1">‚öôÔ∏è Configuraci√≥n</h1>
                        <p class="text-sm opacity-90">Personaliza tu experiencia</p>
                    </div>
                    <div class="settings-content flex-1 p-5 bg-white dark:bg-gray-800 dark:text-white">
                        <div class="setting-item flex justify-between items-center border-b border-gray-200 py-4 dark:border-gray-700">
                            <div>
                                <strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">üì° Modo Offline</strong>
                                <p class="text-gray-500 text-xs mt-1 dark:text-gray-400">Reduce uso de bater√≠a y datos</p>
                            </div>
                            <button aria-label="Alternar modo offline" aria-pressed="false" class="toggle relative w-12 h-6 bg-gray-300 rounded-full cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" id="offlineToggle" onclick="toggleOffline()">
                                <span class="toggle-circle absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform"></span>
                            </button>
                        </div>
                        <div class="setting-item flex justify-between items-center border-b border-gray-200 py-4 dark:border-gray-700">
                            <div>
                                <strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">üîî Notificaciones</strong>
                                <p class="text-gray-500 text-xs mt-1 dark:text-gray-400">Alertas y eventos del campus</p>
                            </div>
                            <button aria-label="Alternar notificaciones" aria-pressed="true" class="toggle active relative w-12 h-6 bg-indigo-700 rounded-full cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" id="notificationsToggle" onclick="toggleNotifications()">
                                <span class="toggle-circle absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform translate-x-6"></span>
                            </button>
                        </div>
                        <div class="setting-item flex justify-between items-center border-b border-gray-200 py-4 dark:border-gray-700">
                            <div>
                                <strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">‚ôø Rutas Accesibles</strong>
                                <p class="text-gray-500 text-xs mt-1 dark:text-gray-400">Priorizar accesibilidad</p>
                            </div>
                            <button aria-label="Alternar rutas accesibles" aria-pressed="false" class="toggle relative w-12 h-6 bg-gray-300 rounded-full cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" id="accessibilityToggle" onclick="toggleAccessibility()">
                                <span class="toggle-circle absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform"></span>
                            </button>
                        </div>
                        <div class="setting-item flex justify-between items-center border-b border-gray-200 py-4 dark:border-gray-700">
                            <div>
                                <strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">üåô Modo Oscuro</strong>
                                <p class="text-gray-500 text-xs mt-1 dark:text-gray-400">Reducir fatiga visual</p>
                            </div>
                            <button aria-label="Alternar modo oscuro" aria-pressed="false" class="toggle relative w-12 h-6 bg-gray-300 rounded-full cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" id="darkModeToggle" onclick="toggleDarkMode()">
                                <span class="toggle-circle absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform"></span>
                            </button>
                        </div>
                        <div class="setting-item flex justify-between items-center py-4">
                            <div>
                                <strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">üîä Navegaci√≥n por Voz</strong>
                                <p class="text-gray-500 text-xs mt-1 dark:text-gray-400">Instrucciones habladas</p>
                            </div>
                            <button aria-label="Alternar navegaci√≥n por voz" aria-pressed="true" class="toggle active relative w-12 h-6 bg-indigo-700 rounded-full cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" id="voiceToggle" onclick="toggleVoice()">
                                <span class="toggle-circle absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform translate-x-6"></span>
                            </button>
                        </div>
                    </div>
                </section>
            </main>
            <!-- Bottom Navigation -->
            <nav class="bottom-nav bg-white py-4 shadow-inner flex justify-around items-center select-none transition-colors duration-500" id="bottomNav">
                <button aria-label="Ir a Inicio" class="nav-item active flex flex-col items-center text-indigo-700 rounded-lg px-3 py-1 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="showScreen('home', event)">
                    <i class="nav-icon fas fa-home text-2xl mb-1"></i>
                    <span class="nav-text text-xs font-semibold">Inicio</span>
                </button>
                <button aria-label="Ir a Mapa" class="nav-item flex flex-col items-center text-gray-600 rounded-lg px-3 py-1 transition-colors hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="showScreen('map', event)">
                    <i class="nav-icon fas fa-map text-2xl mb-1"></i>
                    <span class="nav-text text-xs font-semibold">Mapa</span>
                </button>
                <button aria-label="Ir a Favoritos" class="nav-item flex flex-col items-center text-gray-600 rounded-lg px-3 py-1 transition-colors hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="showScreen('favorites', event)">
                    <i class="nav-icon fas fa-star text-2xl mb-1"></i>
                    <span class="nav-text text-xs font-semibold">Favoritos</span>
                </button>
                <button aria-label="Ir a Ajustes" class="nav-item flex flex-col items-center text-gray-600 rounded-lg px-3 py-1 transition-colors hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400" onclick="showScreen('settings', event)">
                    <i class="nav-icon fas fa-cog text-2xl mb-1"></i>
                    <span class="nav-text text-xs font-semibold">Ajustes</span>
                </button>
            </nav>
            <!-- Chatbot Button -->
            <button aria-label="Abrir chatbot" class="chatbot-btn fixed bottom-28 right-7 w-14 h-14 bg-pink-500 text-white rounded-full shadow-lg flex items-center justify-center text-3xl hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-pink-400 z-50 animate-pulse">
                <i class="fas fa-robot"></i>
            </button>
            <!-- Notification -->
            <div class="notification fixed top-16 left-5 right-5 bg-green-600 text-white p-4 rounded-lg shadow-lg z-50 transform -translate-y-24 opacity-0 transition-all duration-300 pointer-events-none select-none text-center text-sm font-semibold" id="notification">
            </div>
        </div>
    </div>
    <script>
        // Facultades base de datos
        const facultades = [
            "Biblioteca Central",
            "Facultad de Ciencias de Ingenier√≠a y Construcci√≥n",
            "Facultad de Ingenier√≠a y Ciencias Geol√≥gicas",
            "Facultad de Ciencias",
            "Facultad de Humanidades",
            "Facultad de Educaci√≥n",
            "Facultad de Ciencias Jur√≠dicas",
            "Facultad de Econom√≠a y Administraci√≥n",
            "Escuela de Arquitectura",
            "Escuela de Ciencias Empresariales",
            "Ba√±os",
            "Comedor Principal",
            "Laboratorio de Computaci√≥n",
            "Auditorium",
            "Secretar√≠a",
            "Estacionamiento",
            "Enfermer√≠a"
        ];

        // Favoritos almacenados en memoria (puede ser localStorage para persistencia)
        let favoritos = [];

        // Referencias DOM
        const autocomplete = document.getElementById('autocomplete');
        const searchInput = document.getElementById('searchInput');
        const addFavoriteBtn = document.getElementById('addFavoriteBtn'); // Ahora en el mapa
        const favoritesList = document.getElementById('favoritesList');
        const quickAccessGrid = document.querySelector('.quick-grid');

        // Funci√≥n para renderizar autocomplete
        function renderAutocomplete() {
            autocomplete.innerHTML = '';
            facultades.forEach(facultad => {
                const div = document.createElement('div');
                div.className = 'autocomplete-item px-5 py-4 border-b border-gray-100 cursor-pointer hover:bg-indigo-50 focus:bg-indigo-100 dark:border-gray-700 dark:hover:bg-indigo-900 dark:focus:bg-indigo-800';
                div.setAttribute('data-location', facultad);
                div.setAttribute('role', 'option');
                div.setAttribute('tabindex', '0');
                div.setAttribute('aria-selected', 'false');
                div.textContent = facultad;
                autocomplete.appendChild(div);

                div.addEventListener('click', () => {
                    searchInput.value = facultad;
                    autocomplete.classList.add('hidden');
                    navigateToLocation(facultad);
                    // updateAddFavoriteBtn(); // Ya no se llama aqu√≠, se llama en navigateToLocation
                });
                div.addEventListener('keydown', e => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        div.click();
                    }
                });
            });
        }

        // Funci√≥n para renderizar los elementos de acceso r√°pido
        function renderQuickAccessItems() {
            quickAccessGrid.innerHTML = ''; // Clear existing items
            const quickAccessLocations = [
                { name: "Biblioteca Central", icon: "üìö", text: "Biblioteca" },
                { name: "Ba√±os", icon: "üöª", text: "Ba√±os" },
                { name: "Comedor Principal", icon: "üçΩÔ∏è", text: "Comedor" },
                { name: "Secretar√≠a", icon: "üìù", text: "Secretar√≠a" },
                { name: "Estacionamiento", icon: "üöó", text: "Parking" },
                { name: "Enfermer√≠a", icon: "üè•", text: "Enfermer√≠a" }
            ];

            quickAccessLocations.forEach(item => {
                const div = document.createElement('div');
                div.className = 'quick-item bg-white p-5 rounded-xl shadow-sm text-center cursor-pointer transition hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-700 dark:text-white';
                div.setAttribute('aria-label', `Ir a ${item.name}`);
                div.setAttribute('data-location', item.name);
                div.setAttribute('role', 'button');
                div.setAttribute('tabindex', '0');
                div.innerHTML = `
                    <span class="quick-item-icon text-3xl block mb-2">${item.icon}</span>
                    <span class="quick-item-text text-xs font-medium text-gray-600 dark:text-gray-300">${item.text}</span>
                `;
                div.addEventListener('click', () => {
                    navigateToLocation(item.name);
                });
                div.addEventListener('keydown', e => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        navigateToLocation(item.name);
                    }
                });
                quickAccessGrid.appendChild(div);
            });
        }

        renderAutocomplete();
        renderQuickAccessItems(); // Call to render quick access items on load

        // Actualizar estado bot√≥n agregar favorito (ahora para la ubicaci√≥n mostrada en el mapa)
        function updateAddFavoriteBtn() {
            const currentLocation = document.getElementById('routeLocation').textContent.trim();
            if (currentLocation && facultades.includes(currentLocation) && !favoritos.includes(currentLocation)) {
                addFavoriteBtn.disabled = false;
                addFavoriteBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                addFavoriteBtn.disabled = true;
                addFavoriteBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        // El input de b√∫squeda en la pantalla de inicio ya no necesita habilitar el bot√≥n de favoritos
        searchInput.addEventListener('input', () => {
            const val = searchInput.value.trim().toLowerCase();
            if (val.length > 0) {
                autocomplete.classList.remove('hidden');
                // Filtrar items
                [...autocomplete.children].forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(val)) {
                        item.classList.remove('hidden');
                        item.setAttribute('aria-selected', 'false');
                    } else {
                        item.classList.add('hidden');
                        item.setAttribute('aria-selected', 'false');
                    }
                });
            } else {
                autocomplete.classList.add('hidden');
            }
        });

        searchInput.addEventListener('blur', () => {
            setTimeout(() => {
                autocomplete.classList.add('hidden');
            }, 200);
        });

        // Agregar favorito (ahora el listener est√° en el bot√≥n del mapa)
        addFavoriteBtn.addEventListener('click', () => {
            const location = document.getElementById('routeLocation').textContent.trim(); // Obtener la ubicaci√≥n del panel de ruta
            if (location && facultades.includes(location) && !favoritos.includes(location)) {
                favoritos.push(location);
                renderFavoritos();
                showNotification(`‚≠ê "${location}" agregado a Favoritos`);
                updateAddFavoriteBtn(); // Actualizar el estado del bot√≥n despu√©s de agregar
            }
        });

        // Renderizar favoritos
        function renderFavoritos() {
            favoritesList.innerHTML = '';
            if (favoritos.length === 0) {
                const p = document.createElement('p');
                p.className = 'text-gray-500 dark:text-gray-400 text-center mt-10';
                p.textContent = 'No tienes ubicaciones favoritas a√∫n.';
                favoritesList.appendChild(p);
                return;
            }
            favoritos.forEach((fav, index) => {
                const div = document.createElement('div');
                div.className = 'setting-item flex justify-between items-center border-b border-gray-200 py-4 dark:border-gray-700';
                const infoDiv = document.createElement('div');
                infoDiv.innerHTML = `<strong class="text-indigo-900 text-lg flex items-center gap-2 dark:text-indigo-300">${getIconForLocation(fav)} ${fav}</strong><p class="text-gray-500 text-xs mt-1 dark:text-gray-400">${getDescriptionForLocation(fav)}</p>`;
                const btn = document.createElement('button');
                btn.setAttribute('aria-label', `Eliminar ${fav}`);
                btn.className = 'bg-red-600 hover:bg-red-700 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition';
                btn.innerHTML = '<i class="fas fa-trash-alt"></i>';
                btn.addEventListener('click', () => {
                    favoritos.splice(index, 1);
                    renderFavoritos();
                    showNotification(`üóëÔ∏è "${fav}" eliminado de Favoritos`);
                    // Si la ubicaci√≥n eliminada es la que se muestra en el mapa, actualizar el bot√≥n
                    const currentLocationOnMap = document.getElementById('routeLocation').textContent.trim();
                    if (currentLocationOnMap === fav) {
                        updateAddFavoriteBtn();
                    }
                });
                // A√±adido: Al hacer click en el div infoDiv, navegar al mapa y mostrar ruta
                infoDiv.style.cursor = 'pointer';
                infoDiv.addEventListener('click', () => {
                    navigateToLocation(fav);
                });
                infoDiv.addEventListener('keydown', e => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        navigateToLocation(fav);
                    }
                });
                infoDiv.setAttribute('tabindex', '0');
                infoDiv.setAttribute('role', 'button');
                infoDiv.setAttribute('aria-label', `Ir a ${fav} en el mapa`);
                div.appendChild(infoDiv);
                div.appendChild(btn);
                favoritesList.appendChild(div);
            });
        }

        // Iconos para ubicaciones
        function getIconForLocation(location) {
            const iconsMap = {
                "Biblioteca Central": "üìö",
                "Facultad de Ciencias de Ingenier√≠a y Construcci√≥n": "üèóÔ∏è",
                "Facultad de Ingenier√≠a y Ciencias Geol√≥gicas": "‚õèÔ∏è",
                "Facultad de Ciencias": "üî¨",
                "Facultad de Humanidades": "üìñ",
                "Facultad de Educaci√≥n": "üéì",
                "Facultad de Ciencias Jur√≠dicas": "‚öñÔ∏è",
                "Facultad de Econom√≠a y Administraci√≥n": "üíº",
                "Escuela de Arquitectura": "üèõÔ∏è",
                "Escuela de Ciencias Empresariales": "üìä",
                "Ba√±os": "üöª",
                "Comedor Principal": "üçΩÔ∏è",
                "Laboratorio de Computaci√≥n": "üíª",
                "Auditorium": "üé≠",
                "Secretar√≠a": "üìù",
                "Estacionamiento": "üöó",
                "Enfermer√≠a": "üè•"
            };
            return iconsMap[location] || "üìç";
        }

        // Descripciones para favoritos (puede ser extendido)
        function getDescriptionForLocation(location) {
            const descMap = {
                "Biblioteca Central": "Visitado frecuentemente",
                "Facultad de Ciencias de Ingenier√≠a y Construcci√≥n": "Edificio principal de ingenier√≠a",
                "Facultad de Ingenier√≠a y Ciencias Geol√≥gicas": "Laboratorios y aulas",
                "Facultad de Ciencias": "Ciencias naturales y exactas",
                "Facultad de Humanidades": "Estudios sociales y human√≠sticos",
                "Facultad de Educaci√≥n": "Formaci√≥n docente",
                "Facultad de Ciencias Jur√≠dicas": "Estudios legales",
                "Facultad de Econom√≠a y Administraci√≥n": "Negocios y administraci√≥n",
                "Escuela de Arquitectura": "Dise√±o y construcci√≥n",
                "Escuela de Ciencias Empresariales": "Gesti√≥n y finanzas",
                "Ba√±os": "Servicios sanitarios",
                "Comedor Principal": "Horario: 12:00 - 14:00",
                "Laboratorio de Computaci√≥n": "Equipos y software",
                "Auditorium": "Eventos y conferencias",
                "Secretar√≠a": "Atenci√≥n administrativa",
                "Estacionamiento": "Zona de parking",
                "Enfermer√≠a": "Atenci√≥n m√©dica"
            };
            return descMap[location] || "";
        }

        // Screen Navigation
        let currentScreen = 'home';
        let isOffline = false;

        function showScreen(screenId, event) {
            if (event) { // Check if event is defined (for clicks)
                event.preventDefault(); // Prevent default button behavior if it's a click event
            }

            document.querySelectorAll('.screen-content').forEach(screen => {
                screen.classList.add('hidden');
                screen.classList.remove('flex', 'active');
            });
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active', 'text-indigo-700');
                item.classList.add('text-gray-600');
            });

            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.remove('hidden');
                screen.classList.add('flex', 'active');
            }

            // Update active navigation item
            const navItem = document.querySelector(`.nav-item[onclick*="showScreen('${screenId}')"]`);
            if (navItem) {
                navItem.classList.add('active', 'text-indigo-700');
                navItem.classList.remove('text-gray-600');
            }

            currentScreen = screenId;

            // Re-render favorites if navigating to favorites screen
            if (screenId === 'favorites') {
                renderFavoritos();
            }
            // Si se navega a la pantalla del mapa, actualizar el estado del bot√≥n de favoritos
            if (screenId === 'map') {
                updateAddFavoriteBtn();
            }
        }

        // Navigation Functions
        function navigateToLocation(location) {
            // Show map screen
            const mapBtn = document.querySelector('.nav-item[aria-label="Ir a Mapa"]');
            if (mapBtn) {
                // Create a dummy event object for showScreen
                const dummyEvent = {
                    currentTarget: mapBtn,
                    preventDefault: () => {} // Mock preventDefault
                };
                showScreen('map', dummyEvent);
            }

            // Update route info
            const routeLocation = document.getElementById('routeLocation');
            if (routeLocation) routeLocation.textContent = location;

            const routeInfo = document.getElementById('routeInfo');
            if (routeInfo) routeInfo.style.transform = 'translateY(0)';

            showNotification(`üß≠ Calculando ruta a ${location}...`);

            // Update add favorite button state based on the new location
            updateAddFavoriteBtn();
        }

        function toggleRouteInfo() {
            const routeInfo = document.getElementById('routeInfo');
            if (!routeInfo) return;
            if (routeInfo.style.transform === 'translateY(0px)') {
                routeInfo.style.transform = 'translateY(75%)';
            } else {
                routeInfo.style.transform = 'translateY(0)';
            }
        }

        function startNavigation() {
            showNotification('üß≠ Iniciando navegaci√≥n...');
            const routeInfo = document.getElementById('routeInfo');
            if (routeInfo) routeInfo.style.transform = 'translateY(75%)';
        }

        // Map Controls
        function zoomIn() {
            showNotification('üîç Zoom aumentado');
        }

        function zoomOut() {
            showNotification('üîç Zoom reducido');
        }

        function toggleMapType() {
            showNotification('üõ∞Ô∏è Vista cambiada');
        }

        function centerLocation() {
            showNotification('üìç Ubicaci√≥n centrada');
        }

        // Settings Functions
        function toggleOffline() {
            const toggle = document.getElementById('offlineToggle');
            const indicator = document.getElementById('offlineIndicator');
            if (!toggle || !indicator) return;

            const circle = toggle.querySelector('.toggle-circle');
            const isActive = toggle.classList.toggle('active');
            toggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');

            if (isActive) {
                toggle.classList.remove('bg-gray-300');
                toggle.classList.add('bg-indigo-700');
                circle.style.transform = 'translateX(24px)';
                indicator.classList.remove('hidden');
                isOffline = true;
                showNotification('üì° Modo offline activado');
            } else {
                toggle.classList.remove('bg-indigo-700');
                toggle.classList.add('bg-gray-300');
                circle.style.transform = 'translateX(0)';
                indicator.classList.add('hidden');
                isOffline = false;
                showNotification('üì° Modo online activado');
            }
        }

        function toggleNotifications() {
            const toggle = document.getElementById('notificationsToggle');
            if (!toggle) return;
            const circle = toggle.querySelector('.toggle-circle');
            const isActive = toggle.classList.toggle('active');
            toggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');

            if (isActive) {
                toggle.classList.remove('bg-gray-300');
                toggle.classList.add('bg-indigo-700');
                circle.style.transform = 'translateX(24px)';
            } else {
                toggle.classList.remove('bg-indigo-700');
                toggle.classList.add('bg-gray-300');
                circle.style.transform = 'translateX(0)';
            }
            showNotification('üîî Configuraci√≥n de notificaciones actualizada');
        }

        function toggleAccessibility() {
            const toggle = document.getElementById('accessibilityToggle');
            if (!toggle) return;
            const circle = toggle.querySelector('.toggle-circle');
            const isActive = toggle.classList.toggle('active');
            toggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');

            if (isActive) {
                toggle.classList.remove('bg-gray-300');
                toggle.classList.add('bg-indigo-700');
                circle.style.transform = 'translateX(24px)';
            } else {
                toggle.classList.remove('bg-indigo-700');
                toggle.classList.add('bg-gray-300');
                circle.style.transform = 'translateX(0)';
            }
            showNotification('‚ôø Configuraci√≥n de accesibilidad actualizada');
        }

        function toggleDarkMode() {
            const toggle = document.getElementById('darkModeToggle');
            if (!toggle) return;
            const circle = toggle.querySelector('.toggle-circle');
            const isActive = toggle.classList.toggle('active');
            toggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');

            const body = document.getElementById('body');
            const phoneContainer = document.getElementById('phoneContainer');
            const screen = document.getElementById('screen');
            const statusBar = document.getElementById('statusBar');
            const headerHome = document.getElementById('headerHome');
            const headerMap = document.getElementById('headerMap');
            const headerFavorites = document.getElementById('headerFavorites');
            const headerSettings = document.getElementById('headerSettings');
            const searchSection = document.getElementById('searchSection');
            const quickAccess = document.getElementById('quickAccess');
            const bottomNav = document.getElementById('bottomNav');

            if (isActive) {
                toggle.classList.remove('bg-gray-300');
                toggle.classList.add('bg-indigo-700');
                circle.style.transform = 'translateX(24px)';

                body.classList.add('bg-gray-900', 'text-gray-200');
                phoneContainer.classList.add('bg-gray-900');
                screen.classList.add('bg-gray-900');
                statusBar.classList.replace('bg-indigo-900', 'bg-indigo-800');
                headerHome.classList.replace('bg-indigo-900', 'bg-indigo-800');
                headerMap.classList.replace('bg-indigo-900', 'bg-indigo-800');
                headerFavorites.classList.replace('bg-indigo-900', 'bg-indigo-800');
                headerSettings.classList.replace('bg-indigo-900', 'bg-indigo-800');
                searchSection.classList.add('dark');
                quickAccess.classList.add('dark');
                bottomNav.classList.add('dark');

                // Update nav text colors
                document.querySelectorAll('.nav-item').forEach(item => {
                    if (item.classList.contains('active')) {
                        item.classList.add('text-indigo-300');
                        item.classList.remove('text-indigo-700');
                    } else {
                        item.classList.add('text-gray-400');
                        item.classList.remove('text-gray-600');
                    }
                });
            } else {
                toggle.classList.remove('bg-indigo-700');
                toggle.classList.add('bg-gray-300');
                circle.style.transform = 'translateX(0)';

                body.classList.remove('bg-gray-900', 'text-gray-200');
                phoneContainer.classList.remove('bg-gray-900');
                screen.classList.remove('bg-gray-900');
                statusBar.classList.replace('bg-indigo-800', 'bg-indigo-900');
                headerHome.classList.replace('bg-indigo-800', 'bg-indigo-900');
                headerMap.classList.replace('bg-indigo-800', 'bg-indigo-900');
                headerFavorites.classList.replace('bg-indigo-800', 'bg-indigo-900');
                headerSettings.classList.replace('bg-indigo-800', 'bg-indigo-900');
                searchSection.classList.remove('dark');
                quickAccess.classList.remove('dark');
                bottomNav.classList.remove('dark');

                // Update nav text colors
                document.querySelectorAll('.nav-item').forEach(item => {
                    if (item.classList.contains('active')) {
                        item.classList.add('text-indigo-700');
                        item.classList.remove('text-indigo-300');
                    } else {
                        item.classList.add('text-gray-600');
                        item.classList.remove('text-gray-400');
                    }
                });
            }
            showNotification('üåô Modo oscuro ' + (isActive ? 'activado' : 'desactivado'));
        }

        function toggleVoice() {
            const toggle = document.getElementById('voiceToggle');
            if (!toggle) return;
            const circle = toggle.querySelector('.toggle-circle');
            const isActive = toggle.classList.toggle('active');
            toggle.setAttribute('aria-pressed', isActive ? 'true' : 'false');

            if (isActive) {
                toggle.classList.remove('bg-gray-300');
                toggle.classList.add('bg-indigo-700');
                circle.style.transform = 'translateX(24px)';
            } else {
                toggle.classList.remove('bg-indigo-700');
                toggle.classList.add('bg-gray-300');
                circle.style.transform = 'translateX(0)';
            }
            showNotification('üîä Navegaci√≥n por voz actualizada');
        }

        // Chatbot
        const chatbotBtn = document.querySelector('.chatbot-btn');
        chatbotBtn.addEventListener('click', openChatbot);

        function openChatbot() {
            showNotification('ü§ñ ¬°Hola! ¬øEn qu√© puedo ayudarte? "¬øD√≥nde est√° la biblioteca?"');
        }

        // Notification System
        const notification = document.getElementById('notification');
        let notificationTimeout;

        function showNotification(message) {
            if (!notification) return;
            notification.textContent = message;
            notification.classList.add('opacity-100', 'translate-y-0');
            notification.classList.remove('opacity-0', '-translate-y-24', 'pointer-events-none');
            notification.style.pointerEvents = 'auto';

            clearTimeout(notificationTimeout);
            notificationTimeout = setTimeout(() => {
                notification.classList.remove('opacity-100', 'translate-y-0');
                notification.classList.add('opacity-0', '-translate-y-24', 'pointer-events-none');
                notification.style.pointerEvents = 'none';
            }, 3000);
        }

        // Route Options
        document.querySelectorAll('.route-option').forEach(option => {
            option.addEventListener('click', function () {
                document.querySelectorAll('.route-option').forEach(o => {
                    o.classList.remove('active', 'bg-indigo-700', 'text-white', 'border-indigo-700');
                    o.classList.add('bg-white', 'text-gray-700', 'border-gray-300');
                    o.setAttribute('aria-checked', 'false');
                });
                this.classList.add('active', 'bg-indigo-700', 'text-white', 'border-indigo-700');
                this.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');
                this.setAttribute('aria-checked', 'true');
                showNotification(`Ruta seleccionada: ${this.textContent.trim()}`);
            });
        });

        // Initial notifications
        setTimeout(() => {
            showNotification('üëã ¬°Bienvenido a UCN Navigator!');
        }, 1000);

        setTimeout(() => {
            showNotification('üí° Tip: Usa el chatbot para preguntas r√°pidas');
        }, 5000);
    </script>
</body>
</html>
